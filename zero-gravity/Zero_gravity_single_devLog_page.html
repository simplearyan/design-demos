<!DOCTYPE html>
<html lang="en" class="dark scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARYAN.DS // LOG_004</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Inter:wght@400;500&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        void: '#050505',
                        glass: 'rgba(255, 255, 255, 0.03)',
                        border: 'rgba(255, 255, 255, 0.1)',
                        primary: '#3B82F6',
                        secondary: '#8B5CF6',
                        accent: '#F97316', // Orange for Game Dev
                        success: '#10B981',
                    },
                    fontFamily: {
                        sans: ['Plus Jakarta Sans', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    animation: {
                        'blob': 'blob 10s infinite',
                    },
                    keyframes: {
                        blob: {
                            '0%': { transform: 'translate(0px, 0px) scale(1)' },
                            '33%': { transform: 'translate(30px, -50px) scale(1.1)' },
                            '66%': { transform: 'translate(-20px, 20px) scale(0.9)' },
                            '100%': { transform: 'translate(0px, 0px) scale(1)' },
                        }
                    }
                }
            }
        }
    </script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            background-color: #050505;
            color: #ffffff;
            font-family: 'Plus Jakarta Sans', sans-serif;
            overflow-x: hidden;
        }

        /* Glassmorphism */
        .glass-panel {
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* Code Block */
        .code-window {
            background: #0D0D0D;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Ambient Background */
        .aurora-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1;
            overflow: hidden;
        }
        .blob { position: absolute; border-radius: 50%; filter: blur(80px); opacity: 0.3; }
        .blob-1 { top: -10%; left: 20%; width: 60vw; height: 60vw; background: #F97316; animation: blob 25s infinite alternate; }
        .blob-2 { bottom: -10%; right: -10%; width: 50vw; height: 50vw; background: #8B5CF6; animation: blob 20s infinite alternate-reverse; }

        /* Typography */
        .prose p { margin-bottom: 1.5rem; color: #9CA3AF; line-height: 1.8; font-size: 1.125rem; }
        .prose h2 { color: white; font-weight: 700; font-size: 1.8rem; margin-top: 3rem; margin-bottom: 1rem; letter-spacing: -0.02em; }
        .prose h3 { color: #E5E7EB; font-weight: 600; font-size: 1.4rem; margin-top: 2rem; margin-bottom: 0.75rem; }
        .prose ul { margin-bottom: 1.5rem; list-style-type: none; padding-left: 0; }
        .prose li { position: relative; padding-left: 1.5rem; color: #D1D5DB; margin-bottom: 0.5rem; }
        .prose li::before { content: "—"; position: absolute; left: 0; color: #F97316; }
    </style>
</head>
<body class="antialiased selection:bg-accent/30 selection:text-white">

    <!-- Ambient Background -->
    <div class="aurora-bg">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="absolute inset-0 opacity-[0.03] bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjZmZmIiBmaWxsLW9wYWNpdHk9IjAuMDUiLz4KPC9zdmc+')]"></div>
    </div>

    <!-- Navigation -->
    <nav class="fixed top-6 left-1/2 -translate-x-1/2 z-50 w-[90%] max-w-5xl">
        <div class="glass-panel rounded-full px-6 py-4 flex justify-between items-center transition-all duration-300 hover:bg-white/5">
            <a href="index.html" class="flex items-center gap-2 group">
                <div class="w-8 h-8 rounded-full bg-gradient-to-tr from-primary to-accent flex items-center justify-center text-white font-bold text-sm shadow-lg shadow-primary/20 group-hover:scale-110 transition-transform">
                    A
                </div>
                <span class="font-bold tracking-tight text-white group-hover:text-primary transition-colors">ARYAN.DS</span>
            </a>

            <div class="hidden md:flex gap-8 text-sm font-medium text-gray-400">
                <a href="index.html" class="hover:text-white transition-colors">Home</a>
                <a href="notes.html" class="hover:text-white transition-colors">Notes</a>
                <a href="solutions.html" class="hover:text-white transition-colors">Solutions</a>
            </div>

            <div class="flex items-center gap-4">
                <a href="devlogs.html" class="hidden md:flex items-center gap-2 text-xs font-mono text-gray-500 hover:text-white transition-colors">
                    <i data-lucide="arrow-left" class="w-4 h-4"></i> BACK_TO_LOGS
                </a>
                <button class="md:hidden text-white"><i data-lucide="menu" class="w-6 h-6"></i></button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-40 pb-20 px-6 max-w-4xl mx-auto">
        
        <!-- Breadcrumb & Status -->
        <div class="flex flex-wrap items-center justify-between gap-4 mb-8">
            <div class="flex items-center gap-2 text-xs font-mono text-gray-500 animate-fade-in-up">
                <a href="devlogs.html" class="hover:text-accent transition-colors">DEV_LOGS</a>
                <span>/</span>
                <span class="text-accent">PHYSICS_ENGINE_V0.4</span>
            </div>
            
            <div class="flex gap-2">
                <span class="px-3 py-1 rounded-full bg-accent/10 border border-accent/20 text-accent text-xs font-mono font-bold">
                    C#
                </span>
                <span class="px-3 py-1 rounded-full bg-white/5 border border-white/10 text-gray-400 text-xs font-mono">
                    UNITY
                </span>
            </div>
        </div>

        <!-- Header -->
        <header class="mb-12">
            <h1 class="text-4xl md:text-6xl font-bold tracking-tighter mb-6 leading-[1.1]">
                Collision Resolution:<br>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-white to-white/50">Impulse Method</span>
            </h1>
            
            <div class="flex items-center gap-4 text-sm text-gray-400 border-l-2 border-accent pl-4">
                <span>By Aryan S.</span>
                <span class="w-1 h-1 rounded-full bg-gray-600"></span>
                <span>Published 2 days ago</span>
                <span class="w-1 h-1 rounded-full bg-gray-600"></span>
                <span>4 min read</span>
            </div>
        </header>

        <!-- Featured Diagram -->
        <div class="glass-panel p-8 rounded-2xl mb-16 flex flex-col items-center justify-center relative overflow-hidden group">
            <div class="absolute inset-0 bg-grid-white/[0.02] bg-[size:20px_20px]"></div>
            
            <!-- Interactive-looking SVG -->
            <svg width="400" height="200" viewBox="0 0 400 200" class="relative z-10 w-full max-w-md drop-shadow-2xl">
                <!-- Object A -->
                <circle cx="150" cy="100" r="40" fill="#1e1e1e" stroke="#F97316" stroke-width="2" class="group-hover:translate-x-2 transition-transform duration-700" />
                <text x="145" y="105" fill="white" font-family="monospace" font-size="12">A</text>
                
                <!-- Object B -->
                <circle cx="250" cy="100" r="40" fill="#1e1e1e" stroke="#8B5CF6" stroke-width="2" class="group-hover:-translate-x-2 transition-transform duration-700" />
                <text x="245" y="105" fill="white" font-family="monospace" font-size="12">B</text>

                <!-- Normal Vector -->
                <line x1="190" y1="100" x2="210" y2="100" stroke="white" stroke-width="2" stroke-dasharray="4,2" />
                
                <!-- Impulse Vectors -->
                <line x1="150" y1="100" x2="120" y2="100" stroke="#F97316" stroke-width="2" marker-end="url(#arrowA)" class="opacity-0 group-hover:opacity-100 transition-opacity delay-100" />
                <line x1="250" y1="100" x2="280" y2="100" stroke="#8B5CF6" stroke-width="2" marker-end="url(#arrowB)" class="opacity-0 group-hover:opacity-100 transition-opacity delay-100" />

                <defs>
                    <marker id="arrowA" markerWidth="10" markerHeight="10" refX="0" refY="3" orient="auto" markerUnits="strokeWidth">
                        <path d="M0,0 L0,6 L9,3 z" fill="#F97316" />
                    </marker>
                    <marker id="arrowB" markerWidth="10" markerHeight="10" refX="0" refY="3" orient="auto" markerUnits="strokeWidth">
                        <path d="M0,0 L0,6 L9,3 z" fill="#8B5CF6" />
                    </marker>
                </defs>
            </svg>
            
            <p class="text-xs font-mono text-gray-500 mt-6">FIG 1.0: IMPULSE VECTORS ALONG COLLISION NORMAL</p>
        </div>

        <!-- Article Content -->
        <article class="prose max-w-none">
            <p>
                Earlier versions of my physics engine used a <strong>penalty-based method</strong> for collisions. While simple to implement (pushing objects apart based on overlap depth), it resulted in "spongy" interactions where objects would sink into each other before bouncing back.
            </p>
            <p>
                To fix this, I refactored the solver to use <strong>Impulse Resolution</strong>. Instead of correcting position directly over time, we calculate an instantaneous change in velocity.
            </p>

            <h2>The Math</h2>
            <p>
                The magnitude of the impulse scalar $j$ is calculated using the coefficient of restitution $e$ (bounciness) and the relative velocity along the normal.
            </p>

            <div class="my-10 p-8 rounded-xl border border-white/10 bg-black/40 flex justify-center">
                <div class="text-xl md:text-2xl font-serif italic text-white text-center leading-relaxed">
                    j = <span class="inline-flex flex-col items-center align-middle mx-2">
                        <span class="border-b border-white/30 pb-2 mb-1">-(1 + e) &cdot; (v<sub>rel</sub> &cdot; n)</span>
                        <span>m<sub>A</sub><sup>-1</sup> + m<sub>B</sub><sup>-1</sup></span>
                    </span>
                </div>
            </div>

            <h2>Implementation Details</h2>
            <p>
                Here is the simplified C# implementation used in the solver loop. Note that we calculate inverse mass upfront to avoid division during the physics step.
            </p>
        </article>

        <!-- Code Block -->
        <div class="code-window rounded-xl overflow-hidden my-10 relative group">
            <div class="flex items-center justify-between px-4 py-3 border-b border-white/10 bg-white/5">
                <div class="flex gap-2">
                    <div class="w-3 h-3 rounded-full bg-red-500/20 border border-red-500/50"></div>
                    <div class="w-3 h-3 rounded-full bg-yellow-500/20 border border-yellow-500/50"></div>
                    <div class="w-3 h-3 rounded-full bg-green-500/20 border border-green-500/50"></div>
                </div>
                <span class="text-xs font-mono text-gray-500">PhysicsSolver.cs</span>
            </div>
            
            <div class="p-6 overflow-x-auto">
                <pre class="font-mono text-sm leading-relaxed"><code class="language-csharp"><span class="text-purple-400">public void</span> <span class="text-blue-400">ResolveCollision</span>(Body a, Body b, Contact contact) {
    <span class="text-gray-500">// 1. Calculate relative velocity</span>
    Vector2 relativeVel = b.Velocity - a.Velocity;

    <span class="text-gray-500">// 2. Calculate velocity along normal</span>
    <span class="text-secondary">float</span> velAlongNormal = Vector2.Dot(relativeVel, contact.Normal);

    <span class="text-gray-500">// Do not resolve if velocities are separating</span>
    <span class="text-purple-400">if</span> (velAlongNormal > 0) <span class="text-purple-400">return</span>;

    <span class="text-gray-500">// 3. Calculate impulse scalar</span>
    <span class="text-secondary">float</span> e = Mathf.Min(a.Restitution, b.Restitution);
    <span class="text-secondary">float</span> j = -(1 + e) * velAlongNormal;
    j /= a.InvMass + b.InvMass;

    <span class="text-gray-500">// 4. Apply impulse</span>
    Vector2 impulse = j * contact.Normal;
    a.Velocity -= a.InvMass * impulse;
    b.Velocity += b.InvMass * impulse;
}</code></pre>
            </div>
        </div>
        
        <article class="prose max-w-none">
            <h2>Results & Next Steps</h2>
            <p>
                The new system handles stacks of boxes much better. However, there is still some jitter when objects are resting on the ground due to micro-bounces.
            </p>
            <ul>
                <li><strong>Next Task:</strong> Implement "Resting Contact" logic to put objects to sleep when velocity is near zero.</li>
                <li><strong>Optimization:</strong> Add Broadphase using a Spatial Hash Grid.</li>
            </ul>
        </article>

    </main>

    <!-- Footer -->
    <footer class="py-12 border-t border-white/5">
        <div class="max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-6">
            <span class="text-gray-500 text-sm">© 2026 Aryan.DS</span>
            <div class="flex gap-6 text-sm text-gray-500">
                <a href="devlogs.html" class="hover:text-white transition-colors">Back to Logs</a>
            </div>
        </div>
    </footer>

    <script>
        lucide.createIcons();
    </script>
</body>
</html>